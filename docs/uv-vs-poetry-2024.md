# UV vs Poetry æœ€æ–°æ¯”è¼ƒï¼ˆ2024å¹´ç‰ˆï¼‰

## é‡è¦ãªç™ºè¦‹ï¼šUVã¯æ—¢ã«ãƒ•ãƒ«æ©Ÿèƒ½ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ„ãƒ¼ãƒ«

### UV ã®ç¾åœ¨ã®æ©Ÿèƒ½ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Šï¼‰

âœ… **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†**
- `uv init` ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
- `pyproject.toml` ã®å®Œå…¨ã‚µãƒãƒ¼ãƒˆ
- `.python-version` ã§ Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

âœ… **ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«**
- `uv.lock` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆï¼ˆTOMLå½¢å¼ï¼‰
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
- äººé–“ãŒèª­ã‚ã‚‹å½¢å¼

âœ… **ä¾å­˜é–¢ä¿‚ç®¡ç†**
- `uv add/remove` ã§ä¾å­˜é–¢ä¿‚ã‚’ç®¡ç†
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ¶ç´„ã®ã‚µãƒãƒ¼ãƒˆ
- Git ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã®ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

âœ… **ãƒ“ãƒ«ãƒ‰æ©Ÿèƒ½**
- `uv build` ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
- `.whl` ã¨ `.tar.gz` ã®ç”Ÿæˆ

âœ… **ãã®ä»–**
- ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚µãƒãƒ¼ãƒˆ
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§åŠ¹ç‡çš„
- pip äº’æ›ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

## ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ¨å¥¨

### ğŸ¯ **UV ã‚’æ¨å¥¨ã™ã‚‹ç†ç”±**

1. **é€Ÿåº¦**: 10-100å€é«˜é€Ÿ
2. **æ©Ÿèƒ½**: Poetry ã¨ã»ã¼åŒç­‰ã®æ©Ÿèƒ½ã‚’æ—¢ã«å®Ÿè£…
3. **ã‚·ãƒ³ãƒ—ãƒ«ã•**: pip ã«è¿‘ã„ä½¿ç”¨æ„Ÿ
4. **å°†æ¥æ€§**: Astral ç¤¾ï¼ˆRuff é–‹ç™ºå…ƒï¼‰ã«ã‚ˆã‚‹æ´»ç™ºãªé–‹ç™º

### UV ã§ã®ç§»è¡Œæ‰‹é †

```bash
# 1. ç¾åœ¨ã® Poetry ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ UV ã¸ç§»è¡Œ
cd discord-arxiv-bot

# 2. UV ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã¾ã ã®å ´åˆï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# 3. Poetry ã®ä¾å­˜é–¢ä¿‚ã‚’ UV å½¢å¼ã«å¤‰æ›
uv pip compile pyproject.toml -o requirements.txt

# 4. UV ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦åˆæœŸåŒ–
uv venv
uv pip sync requirements.txt

# 5. ä»Šå¾Œã¯ UV ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨
uv add fastapi  # ä¾å­˜é–¢ä¿‚è¿½åŠ 
uv lock         # ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
uv sync         # ä¾å­˜é–¢ä¿‚åŒæœŸ
uv run python src/webhook_server.py  # å®Ÿè¡Œ
```

## æ©Ÿèƒ½æ¯”è¼ƒè¡¨ï¼ˆ2024å¹´ç‰ˆï¼‰

| æ©Ÿèƒ½ | UV | Poetry |
|------|-----|--------|
| **é€Ÿåº¦** | âš¡ è¶…é«˜é€Ÿ (Rustè£½) | ğŸŒ é…ã„ (Pythonè£½) |
| **ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«** | âœ… uv.lock | âœ… poetry.lock |
| **pyproject.toml** | âœ… å¯¾å¿œ | âœ… å¯¾å¿œ |
| **ä¾å­˜é–¢ä¿‚è¿½åŠ ** | âœ… uv add | âœ… poetry add |
| **ãƒ“ãƒ«ãƒ‰** | âœ… uv build | âœ… poetry build |
| **å…¬é–‹** | â“ æœªç¢ºèª | âœ… poetry publish |
| **ä»®æƒ³ç’°å¢ƒ** | âœ… è‡ªå‹•ç®¡ç† | âœ… è‡ªå‹•ç®¡ç† |
| **Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†** | âœ… .python-version | âœ… pyproject.toml |
| **ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹** | âœ… å¯¾å¿œ | âŒ éå¯¾å¿œ |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡** | âœ… ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | ğŸ”º ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå˜ä½ |

## çµè«–

**ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ UV ã‚’æ¨å¥¨ã—ã¾ã™**

ç†ç”±ï¼š
1. Discord Bot ã¯é »ç¹ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»æ›´æ–°ã•ã‚Œã‚‹ â†’ UV ã®é€Ÿåº¦ãŒæœ‰åˆ©
2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¬é–‹ã®äºˆå®šãªã— â†’ Poetry ã® publish æ©Ÿèƒ½ä¸è¦
3. ä¾å­˜é–¢ä¿‚ã¯æ¯”è¼ƒçš„ã‚·ãƒ³ãƒ—ãƒ« â†’ UV ã§ååˆ†ç®¡ç†å¯èƒ½
4. CI/CD ã®é«˜é€ŸåŒ– â†’ ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚é–“ã®çŸ­ç¸®

## å®Ÿè£…ææ¡ˆ

```toml
# pyproject.toml ã‚’ UV ç”¨ã«æœ€é©åŒ–
[project]
name = "arxiv-discord-bot"
version = "0.1.0"
description = "Discord bot for searching and sharing arXiv research papers"
requires-python = ">=3.10"
dependencies = [
    "discord-py>=2.3.2",
    "arxiv>=2.0.0",
    "fastapi>=0.104.0",
    "uvicorn>=0.24.0",
    "pynacl>=1.5.0",
    "httpx>=0.25.0",
]

[project.optional-dependencies]
dev = [
    "pytest>=7.4.0",
    "pytest-asyncio>=0.21.0",
    "pytest-cov>=4.1.0",
    "ruff>=0.1.0",
]

[tool.uv]
dev-dependencies = [
    "pytest>=7.4.0",
    "pytest-asyncio>=0.21.0", 
    "pytest-cov>=4.1.0",
    "ruff>=0.1.0",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"
```

### ç§»è¡Œã‚³ãƒãƒ³ãƒ‰

```bash
# Poetry ã‚’å®Œå…¨ã« UV ã«ç½®ãæ›ãˆ
uv init --name arxiv-discord-bot
uv add discord-py arxiv fastapi uvicorn pynacl httpx
uv add --dev pytest pytest-asyncio pytest-cov ruff
uv lock
```